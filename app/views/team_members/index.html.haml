= render "projects/project_head"
%h3.page_title
  Team Members
  (#{@project.users.count})
  %small
    Read more about project permissions
    %strong= link_to "here", help_permissions_path, class: "vlink"

  - if can? current_user, :admin_team_member, @project
    %span.pull-right
      = link_to import_project_team_members_path(@project), class: "btn btn-small grouped", title: "Import team from another project" do
        Import team from another project
      = link_to available_project_teams_path(@project), class: "btn btn-small grouped", title: "Assign project to team of users" do
        Assign project to Team of users
      = link_to new_project_team_member_path(@project), class: "btn btn-primary small grouped", title: "New Team Member" do
        New Team Member

%hr

.clearfix
.row
  .span3
    %ul.nav.nav-pills.nav-stacked
      %li{class: ("active" if !params[:type])}
        = link_to project_team_members_path(type: nil) do
          All
      %li{class: ("active" if params[:type] == 'masters')}
        = link_to project_team_members_path(type: 'masters') do
          Masters
      %li{class: ("active" if params[:type] == 'developers')}
        = link_to project_team_members_path(type: 'developers') do
          Developers
      %li{class: ("active" if params[:type] == 'reporters')}
        = link_to project_team_members_path(type: 'reporters') do
          Reporters
      %li{class: ("active" if params[:type] == 'guests')}
        = link_to project_team_members_path(type: 'guests') do
          Guests
    %h5
      Assigned teams
      (#{@project.user_teams.count})
    %div
      = render "team_members/assigned_teams", project: @project

  .span9
    %div.team-table
      = render "team_members/team", project: @project



